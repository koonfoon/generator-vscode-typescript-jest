notifications:
  email: false
language: node_js
services:
- docker
node_js:
- '14'
git:
  depth: false
before_install: 
install:
- npm ci
script:
- npm run test
after_success:
- echo -e "Test Success"
after_script:
- sed -i 's|SF:../../home/travis/build/koonfoon/generator-vscode-typescript-jest/|SF:|g'
  coverage/lcov.info && cat ./coverage/lcov.info | coveralls -v
before_deploy:
- echo $TRAVIS_BRANCH
- export Git_Branch=$(echo $TRAVIS_BRANCH)
- echo $Git_Branch
- git switch $Git_Branch
- git branch
- git branch --show-current
- echo -e "machine github.com\n  login $GITHUB_TOKEN" > ~/.netrc
- docker pull gittools/gitversion:5.3.5-linux-alpine.3.10-x64-netcoreapp3.1
- export GitVersion_FullSemVer=$(docker run --rm -v "$(pwd):/repo" gittools/gitversion:5.3.5-linux-alpine.3.10-x64-netcoreapp3.1
  /repo -output json -showvariable FullSemVer)
- echo $GitVersion_FullSemVer
- npm run release -- $GitVersion_FullSemVer --no-tests --no-publish --no-yarn --preview --message
  "'%s' +semver:skip [ci skip]"
deploy:
  provider: npm
  skip_cleanup: true
  dry_run: true
  email: koonfoon@gmail.com
  on:
    branch: master
  api_token: 1234-134545-13455-11545tvbh
